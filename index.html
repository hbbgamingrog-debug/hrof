<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ù†Ø§Ø·Ù‚Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background-color: #eef2f3; text-align: center; padding: 20px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 30px; border-radius: 40px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); border: 8px solid #FF9800; }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± */
        #setup-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 1000; }
        .selection-box { background: white; padding: 40px; border-radius: 30px; text-align: center; }
        .gender-btn { font-size: 1.5em; padding: 20px 40px; margin: 10px; border: none; border-radius: 20px; cursor: pointer; transition: 0.3s; color: white; }
        .boy { background: #2196F3; }
        .girl { background: #E91E63; }
        
        .quiz-section { background: #FFF3E0; padding: 20px; border-radius: 20px; margin-bottom: 30px; border: 3px dashed #FF9800; }
        #question-label { font-size: 2em; color: #333; margin-bottom: 15px; display: block; }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 15px; }
        .letter-btn { 
            background: #fff; border: 4px solid #FFCC80; border-radius: 20px; 
            font-size: 3.5em; padding: 10px; cursor: pointer; transition: 0.2s;
            box-shadow: 0 8px 0 #FFCC80; color: #333; height: 120px; display: flex; align-items: center; justify-content: center;
        }
        .correct { background-color: #4CAF50 !important; color: white !important; box-shadow: 0 8px 0 #1B5E20 !important; }
        .wrong { background-color: #f44336 !important; color: white !important; box-shadow: 0 8px 0 #7f0000 !important; }
        .btn-main { background: #4CAF50; color: white; border: none; padding: 15px 40px; font-size: 1.3em; border-radius: 50px; cursor: pointer; box-shadow: 0 5px 0 #2E7D32; font-family: 'Cairo', sans-serif; }
    </style>
</head>
<body>

    <div id="setup-screen">
        <div class="selection-box">
            <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ! Ù‡Ù„ Ø£Ù†Øª ÙˆÙ„Ø¯ Ø£Ù… Ø¨Ù†ØªØŸ</h2>
            <button class="gender-btn boy" onclick="setGender('boy')">Ø£Ù†Ø§ ÙˆÙ„Ø¯ ğŸ‘¦</button>
            <button class="gender-btn girl" onclick="setGender('girl')">Ø£Ù†Ø§ Ø¨Ù†Øª ğŸ‘§</button>
        </div>
    </div>

    <div class="container">
        <h1 id="welcome-msg">Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø­Ø±ÙˆÙ ğŸ“¢</h1>
        
        <div class="quiz-section">
            <span id="question-label">Ø§Ø¶ØºØ· "Ø§Ø¨Ø¯Ø£" Ù„Ù„Ø¹Ø¨</span>
            <button class="btn-main" onclick="nextQuestion()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ğŸ®</button>
        </div>

        <div class="grid" id="alphabetGrid"></div>
    </div>

    <script>
        let userGender = 'boy'; // Ø§ÙØªØ±Ø§Ø¶ÙŠ
        const lettersData = [
            {id: 'Ø£', voice: 'Ø£Ù„Ù'}, {id: 'Ø¨', voice: 'Ø¨Ø§Ø¡'}, {id: 'Øª', voice: 'ØªØ§Ø¡'}, 
            {id: 'Ø«', voice: 'Ø«Ø§Ø¡'}, {id: 'Ø¬', voice: 'Ø¬ÙŠÙ…'}, {id: 'Ø­', voice: 'Ø­Ø§Ø¡'},
            {id: 'Ø®', voice: 'Ø®Ø§Ø¡'}, {id: 'Ø¯', voice: 'Ø¯Ø§Ù„'}, {id: 'Ø°', voice: 'Ø°Ø§Ù„'},
            {id: 'Ø±', voice: 'Ø±Ø§Ø¡'}, {id: 'Ø²', voice: 'Ø²Ø§ÙŠ'}, {id: 'Ø³', voice: 'Ø³ÙŠÙ†'},
            {id: 'Ø´', voice: 'Ø´ÙŠÙ†'}, {id: 'Øµ', voice: 'ØµØ§Ø¯'}, {id: 'Ø¶', voice: 'Ø¶Ø§Ø¯'},
            {id: 'Ø·', voice: 'Ø·Ø§Ø¡'}, {id: 'Ø¸', voice: 'Ø¸Ø§Ø¡'}, {id: 'Ø¹', voice: 'Ø¹ÙŠÙ†'},
            {id: 'Øº', voice: 'ØºÙŠÙ†'}, {id: 'Ù', voice: 'ÙØ§Ø¡'}, {id: 'Ù‚', voice: 'Ù‚Ø§Ù'},
            {id: 'Ùƒ', voice: 'ÙƒØ§Ù'}, {id: 'Ù„', voice: 'Ù„Ø§Ù…'}, {id: 'Ù…', voice: 'Ù…ÙŠÙ…'},
            {id: 'Ù†', voice: 'Ù†ÙˆÙ†'}, {id: 'Ù‡Ù€', voice: 'Ù‡Ø§Ø¡'}, {id: 'Ùˆ', voice: 'ÙˆØ§Ùˆ'}, {id: 'ÙŠ', voice: 'ÙŠØ§Ø¡'}
        ];

        let target = null;
        const grid = document.getElementById('alphabetGrid');

        lettersData.forEach(item => {
            const btn = document.createElement('div');
            btn.className = 'letter-btn';
            btn.innerText = item.id;
            btn.onclick = () => checkChoice(item, btn);
            grid.appendChild(btn);
        });

        function playExternalAudio(text) {
            const url = `https://translate.google.com/translate_tts?ie=UTF-8&q=${encodeURIComponent(text)}&tl=ar&client=tw-ob`;
            const audio = new Audio(url);
            audio.play();
        }

        function setGender(type) {
            userGender = type;
            document.getElementById('setup-screen').style.display = 'none';
            const greet = type === 'boy' ? "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ø¨Ø·Ù„" : "Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ ÙŠØ§ Ø¨Ø·Ù„Ø©";
            document.getElementById('welcome-msg').innerText = greet;
            playExternalAudio(greet + ". Ù‡ÙŠØ§ Ù†ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙˆÙ");
        }

        function nextQuestion() {
            document.querySelectorAll('.letter-btn').forEach(b => b.classList.remove('correct', 'wrong'));
            const randomIndex = Math.floor(Math.random() * lettersData.length);
            target = lettersData[randomIndex];
            
            const qPrefix = userGender === 'boy' ? "ÙŠØ§ Ø¨Ø·Ù„ Ø£ÙŠÙ† Ø­Ø±Ù " : "ÙŠØ§ Ø¨Ø·Ù„Ø© Ø£ÙŠÙ† Ø­Ø±Ù ";
            document.getElementById('question-label').innerText = "Ø£ÙŠÙ† Ø­Ø±Ù: " + target.id;
            playExternalAudio(qPrefix + target.voice);
        }

        function checkChoice(item, element) {
            if (!target) {
                playExternalAudio(item.voice);
                return;
            }

            if (item.id === target.id) {
                element.classList.add('correct');
                const winMsg = userGender === 'boy' ? "Ø£Ø­Ø³Ù†Øª ÙŠØ§ Ø¨Ø·Ù„" : "Ø£Ø­Ø³Ù†ØªÙ ÙŠØ§ Ø¨Ø·Ù„Ø©";
                playExternalAudio(winMsg);
                target = null;
                setTimeout(nextQuestion, 2000);
            } else {
                element.classList.add('wrong');
                playExternalAudio("Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰");
                setTimeout(() => element.classList.remove('wrong'), 500);
            }
        }
    </script>
</body>
</html>
